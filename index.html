<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Willow</title>
    <meta name="description" content="A safe space for your never-ending thoughts. Willow is a macOS app for freeform thinking.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="assets/icon.png">
</head>
<body>
    <main>
        <div class="container">
            <div class="content">
                <h2>HAVE YOU EVER</h2>

                <div class="spacer"></div>

                <p>LEFT A MOVIE THEATER : MESMERIZED</p>

                <p style="opacity: 0.85">CLOSED A BOOK : FASCINATED</p>

                <p style="opacity:0.65">ENVISIONED A FUTURE : INSPIRED</p>

                <div class="spacer"></div>

                <p style="opacity: 0.45">AND IN THESE MOMENTS<span class="dots"><span class="dot">.</span><span class="dot">.</span><span class="dot">.</span></span> WANTED TO</p>

                <div class="spacer"></div>

                <p style="text-align: right";><span class="ramble-hover" id="ramble">ramble</span>?</p>

                <div class="spacer"></div>

                <p>SO HAVE WE.</p>

                <div class="spacer"></div>

                <p>THAT'S WHY WE BUILT <span class="textcolor">willow</span></p>

                <p>A SAFE SPACE FOR YOUR NEVER-ENDING THOUGHTS.</p>

                <p>BECAUSE YOUR MIND IS THE ULTIMATE PLAYGROUND</p>

                <div class="spacer"></div>

                <p>happy rambling!</p>

                <p>ðŸ’­</p>

                <p>team willow</p>

                <div class="spacer"></div>

                <form id="waitlist-form" class="waitlist-form">
                    <input type="email" name="email" placeholder="YOUR EMAIL" required>
                    <button type="submit">JOIN WAITLIST</button>
                </form>
                <p id="form-message" class="form-message"></p>

                <!-- <p class="platform">Available for macOS</p> -->
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Willow &middot; <a href="privacy.html">Privacy</a></p>
    </footer>

    <script>
        const form = document.getElementById('waitlist-form');
        const message = document.getElementById('form-message');

        // Replace this URL with your Google Apps Script web app URL
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw9V0glE78xrIek0leCYnXl-BeNPfXsIAHrNlHZe4Vg6k6nyr9oCxvj3c_l5GozX7vx/exec';

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = form.email.value;
            const button = form.querySelector('button');

            button.disabled = true;
            button.textContent = 'joining...';

            try {
                await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: email })
                });

                form.style.display = 'none';
                message.textContent = "you're on the list! ðŸ’›";
                message.style.color = '#333';
            } catch (error) {
                message.textContent = 'something went wrong. try again?';
                message.style.color = '#c00';
                button.disabled = false;
                button.textContent = 'join waitlist';
            }
        });
    </script>

    <script>
        const ramble = document.getElementById('ramble');
        const randomTexts = ["the epicness of oppenheimer...", "day 2 of building a virtual dj", "@#%%^!$", "&^%$#&*%$#$",
        "journal entry: 10 red-tailed hawks spotted!", "tomorrow, and tomorrow, and tomorrow - thoughts", "coachella: colors"];
        let floatingTexts = [];
        let isFloating = false;
        let availableTexts = [...randomTexts];

        function getNextText() {
            if (availableTexts.length === 0) {
                availableTexts = [...randomTexts];
            }
            const index = Math.floor(Math.random() * availableTexts.length);
            return availableTexts.splice(index, 1)[0];
        }

        function createFloating() {
            if (!isFloating) return;

            const rect = ramble.getBoundingClientRect();
            const centerX = rect.left - rect.width*5;
            const centerY = rect.top - rect.height/2;

            const text = document.createElement('span');
            text.className = 'floating-text';
            text.textContent = getNextText();

            const angle = Math.PI / 2 + Math.random() * Math.PI;
            const startDistance = 20;
            const floatDistance = 1000 + Math.random() * 60;
            const startX = centerX + Math.cos(angle) * startDistance;
            const startY = centerY + Math.sin(angle) * startDistance;
            text.style.left = startX + 'px';
            text.style.top = startY + 'px';
            text.style.setProperty('--x', `${Math.cos(angle) * floatDistance}px`);
            text.style.setProperty('--y', `${Math.sin(angle) * floatDistance}px`);

            const gray = Math.floor(Math.random() * 180);
            text.style.color = `rgb(${gray}, ${gray}, ${gray})`;

            document.body.appendChild(text);
            floatingTexts.push(text);

            setTimeout(() => {
                text.remove();
                floatingTexts = floatingTexts.filter(t => t !== text);
            }, 1000);

            setTimeout(createFloating, 1000);
        }

        function startFloating() {
            if (isFloating) return;
            isFloating = true;
            createFloating();
        }

        function stopFloating() {
            isFloating = false;
            floatingTexts.forEach(t => t.remove());
            floatingTexts = [];
        }

        // Desktop: hover
        ramble.addEventListener('mouseenter', startFloating);
        ramble.addEventListener('mouseleave', stopFloating);

        // Mobile: scroll into view
        const isMobile = window.matchMedia('(max-width: 600px)').matches || 'ontouchstart' in window;
        if (isMobile) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        startFloating();
                    } else {
                        stopFloating();
                    }
                });
            }, { threshold: 0.5 });
            observer.observe(ramble);
        }
    </script>
</body>
</html>
